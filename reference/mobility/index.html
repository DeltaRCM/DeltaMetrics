
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Channel Mobility Functions &#8212; DeltaMetrics 0.3.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="deltametrics.mobility.check_inputs" href="../../_autosummary/deltametrics.mobility.check_inputs.html" />
    <link rel="prev" title="deltametrics.mask.GeometricMask" href="../../_autosummary/deltametrics.mask.GeometricMask.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../_autosummary/deltametrics.mobility.check_inputs.html" title="deltametrics.mobility.check_inputs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../../_autosummary/deltametrics.mask.GeometricMask.html" title="deltametrics.mask.GeometricMask"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DeltaMetrics 0.3.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">API reference</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Channel Mobility Functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="channel-mobility-functions">
<h1>Channel Mobility Functions<a class="headerlink" href="#channel-mobility-functions" title="Permalink to this headline">¶</a></h1>
<p>This set of functions is for computing channel mobility metrics.
Inputs to these functions are some sort of binary channel masks, and maps
defining the fluvial surface (land area) over which the metrics should be
computed. Functionality for fitting linear, harmonic, and exponential curves
to the results of these functions is provided as well.</p>
<p>The functions are defined in <code class="docutils literal notranslate"><span class="pre">deltametrics.mobility</span></code>.</p>
<section id="using-the-mobility-functions">
<h2>Using the Mobility Functions<a class="headerlink" href="#using-the-mobility-functions" title="Permalink to this headline">¶</a></h2>
<p>To use the mobility functions, you need a set of masks covering various time
points from the model output. These can be in the form of a list of mask
objects, numpy ndarrays, or xarrays. Or these can be 3-D arrays or xarrays.</p>
<p>For this example a few masks will be generated and put into lists. Then these
lists of masks will be used to compute metrics of channel mobility,
which will then be plotted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>needs to be expanded!</p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">golfcube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">sample_data</span><span class="o">.</span><span class="n">golf</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">channelmask_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">landmask_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">landmask_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">LandMask</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">ChannelMask</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;velocity&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flow_threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dryfrac</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_channel_decay</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ophi</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_planform_overlap</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fr</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_reworking_fraction</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PwetA</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_channel_abandonment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dryfrac</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Dry Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ophi</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Overlap Values&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fr</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Reworked Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PwetA</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Abandoned Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../reference/mobility/index-1.png">png</a>, <a class="reference external" href="../../reference/mobility/index-1.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../_images/index-11.png" class="plot-directive" src="../../_images/index-11.png" />
</figure>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.check_inputs.html#deltametrics.mobility.check_inputs" title="deltametrics.mobility.check_inputs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_inputs</span></code></a>(chmap[, basevalues, ...])</p></td>
<td><p>Check the input variable values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_channel_decay.html#deltametrics.mobility.calculate_channel_decay" title="deltametrics.mobility.calculate_channel_decay"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_channel_decay</span></code></a>(chmap, landmap[, ...])</p></td>
<td><p>Calculate channel decay (reduction in dry fraction).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_planform_overlap.html#deltametrics.mobility.calculate_planform_overlap" title="deltametrics.mobility.calculate_planform_overlap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_planform_overlap</span></code></a>(chmap, landmap[, ...])</p></td>
<td><p>Calculate channel planform overlap.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_reworking_fraction.html#deltametrics.mobility.calculate_reworking_fraction" title="deltametrics.mobility.calculate_reworking_fraction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_reworking_fraction</span></code></a>(chmap, landmap)</p></td>
<td><p>Calculate the reworking fraction.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_channel_abandonment.html#deltametrics.mobility.calculate_channel_abandonment" title="deltametrics.mobility.calculate_channel_abandonment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_channel_abandonment</span></code></a>(chmap[, ...])</p></td>
<td><p>Calculate channel abandonment.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../_autosummary/deltametrics.mobility.channel_presence.html#deltametrics.mobility.channel_presence" title="deltametrics.mobility.channel_presence"><code class="xref py py-obj docutils literal notranslate"><span class="pre">channel_presence</span></code></a>(chmap)</p></td>
<td><p>Calculate the normalized channel presence at each pixel location.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Channel Mobility Functions</a><ul>
<li><a class="reference internal" href="#using-the-mobility-functions">Using the Mobility Functions</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../../_autosummary/deltametrics.mask.GeometricMask.html"
                          title="previous chapter">deltametrics.mask.GeometricMask</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../../_autosummary/deltametrics.mobility.check_inputs.html"
                          title="next chapter">deltametrics.mobility.check_inputs</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/reference/mobility/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../_autosummary/deltametrics.mobility.check_inputs.html" title="deltametrics.mobility.check_inputs"
             >next</a> |</li>
        <li class="right" >
          <a href="../../_autosummary/deltametrics.mask.GeometricMask.html" title="deltametrics.mask.GeometricMask"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DeltaMetrics 0.3.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >API reference</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Channel Mobility Functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, The DeltaRCM Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>