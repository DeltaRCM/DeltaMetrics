<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction to mobility functions &#8212; DeltaMetrics 0.4.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css?v=d59dc883" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=ff822928"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Visualization Guide" href="visualization.html" />
    <link rel="prev" title="Introduction to Masking objects" href="mask.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="visualization.html" title="Visualization Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mask.html" title="Introduction to Masking objects"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DeltaMetrics 0.4.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Subject Guides</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction to mobility functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="introduction-to-mobility-functions">
<span id="mobility-subject-guide"></span><h1>Introduction to mobility functions<a class="headerlink" href="#introduction-to-mobility-functions" title="Link to this heading">¶</a></h1>
<p>To use the mobility functions, you need a set of masks covering various time
points from the model output. These can be in the form of a list of mask
objects, numpy ndarrays, or xarrays. Or these can be 3-D arrays or xarrays
arranged with dimensions <cite>t-x-y</cite>.</p>
<p>For this example a few masks will be generated and put into lists. Then these
lists of masks will be used to compute and plot channel mobility metrics.</p>
<section id="calculation-of-channel-and-land-masks">
<h2>Calculation of channel and land masks<a class="headerlink" href="#calculation-of-channel-and-land-masks" title="Link to this heading">¶</a></h2>
<p>The first step to quantifying channel mobility is to determine the location
of the land and channels through time. We do this via the calculation of
both <a class="reference internal" href="../../_autosummary/deltametrics.mask.LandMask.html#deltametrics.mask.LandMask" title="deltametrics.mask.LandMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deltametrics.mask.LandMask</span></code></a> and <a class="reference internal" href="../../_autosummary/deltametrics.mask.ChannelMask.html#deltametrics.mask.ChannelMask" title="deltametrics.mask.ChannelMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deltametrics.mask.ChannelMask</span></code></a>
objects. These masks are binary representations of the land and channel
locations, respectively. To read more about masking, refer to the <a class="reference internal" href="mask.html"><span class="doc">Introduction to Masking objects</span></a>,
<a class="reference internal" href="planform.html"><span class="doc">Introduction to Planform objects</span></a>, and <a class="reference internal" href="../../reference/mask/index.html"><span class="doc">Masking operations API</span></a>
sections of the documentation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">golfcube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">sample_data</span><span class="o">.</span><span class="n">golf</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">channelmask_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">landmask_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">landmask_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">LandMask</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">ChannelMask</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;velocity&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flow_threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="calculation-of-mobility-metrics">
<h2>Calculation of mobility metrics<a class="headerlink" href="#calculation-of-mobility-metrics" title="Link to this heading">¶</a></h2>
<p>Next the lists of masks are used to calculate channel mobility metrics.
The metrics calculated are the dry fraction, planform overlap, reworking
fraction, and abandoned fraction. These metrics are calculated using the
functions <a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_channel_decay.html#deltametrics.mobility.calculate_channel_decay" title="deltametrics.mobility.calculate_channel_decay"><code class="xref py py-func docutils literal notranslate"><span class="pre">deltametrics.mobility.calculate_channel_decay()</span></code></a>,
<a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_planform_overlap.html#deltametrics.mobility.calculate_planform_overlap" title="deltametrics.mobility.calculate_planform_overlap"><code class="xref py py-func docutils literal notranslate"><span class="pre">deltametrics.mobility.calculate_planform_overlap()</span></code></a>,
<a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_reworking_fraction.html#deltametrics.mobility.calculate_reworking_fraction" title="deltametrics.mobility.calculate_reworking_fraction"><code class="xref py py-func docutils literal notranslate"><span class="pre">deltametrics.mobility.calculate_reworking_fraction()</span></code></a>, and
<a class="reference internal" href="../../_autosummary/deltametrics.mobility.calculate_channel_abandonment.html#deltametrics.mobility.calculate_channel_abandonment" title="deltametrics.mobility.calculate_channel_abandonment"><code class="xref py py-func docutils literal notranslate"><span class="pre">deltametrics.mobility.calculate_channel_abandonment()</span></code></a>, respectively.
All of these function require at least one list of masks, and can take
additional arguments to specify the base values and window size for the
sliding window calculations. For more information on these functions, refer
to the <a class="reference internal" href="../../reference/mask/index.html"><span class="doc">Masking operations API</span></a> section of
the documentation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dryfrac</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_channel_decay</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ophi</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_planform_overlap</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fr</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_reworking_fraction</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span> <span class="n">landmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PwetA</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mobility</span><span class="o">.</span><span class="n">calculate_channel_abandonment</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">channelmask_list</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">basevalues_idx</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">window_idx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plotting-the-mobility-metrics">
<h2>Plotting the mobility metrics<a class="headerlink" href="#plotting-the-mobility-metrics" title="Link to this heading">¶</a></h2>
<p>Finally, the mobility metrics are plotted. The metrics are on a single
figure below with the dry fraction on the top left, the planform overlap
on the top right, the reworking fraction on the bottom left, and the
abandoned fraction on the bottom right. The mobility metric for each base
time step is plotted in a different color. The base time steps are the
first three time steps in the list of masks (per the <cite>basevalues_idx</cite>
argument in the calculation of the mobility metrics). Time is expressed in
terms of model seconds, and is known from the Mask objects used to construct
the list of masks passed to the mobility functions.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dryfrac</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Dry Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Ophi</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Overlap Values&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fr</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Reworked Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PwetA</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Abandoned Fraction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../../_downloads/307792dbf60f5cfc692237b0f8d0ff58/mobility-3.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../../_downloads/b63462bf9122e16f11e7fd07775d49d1/mobility-3.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../../_images/mobility-3.png" class="plot-directive" src="../../_images/mobility-3.png" />
</figure>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Introduction to mobility functions</a><ul>
<li><a class="reference internal" href="#calculation-of-channel-and-land-masks">Calculation of channel and land masks</a></li>
<li><a class="reference internal" href="#calculation-of-mobility-metrics">Calculation of mobility metrics</a></li>
<li><a class="reference internal" href="#plotting-the-mobility-metrics">Plotting the mobility metrics</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="mask.html"
                          title="previous chapter">Introduction to Masking objects</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="visualization.html"
                          title="next chapter">Visualization Guide</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guides/subject_guides/mobility.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="visualization.html" title="Visualization Guide"
             >next</a> |</li>
        <li class="right" >
          <a href="mask.html" title="Introduction to Masking objects"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">DeltaMetrics 0.4.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Subject Guides</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction to mobility functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2020, The DeltaRCM Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>