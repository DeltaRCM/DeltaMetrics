
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Introduction to Planform Objects &#8212; DeltaMetrics 0.3.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Developer Guide" href="../../devguide.html" />
    <link rel="prev" title="Comparing speed of stratigraphy access" href="../computations/comparing_speeds_of_stratigraphy_access.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../devguide.html" title="Developer Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../computations/comparing_speeds_of_stratigraphy_access.html" title="Comparing speed of stratigraphy access"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DeltaMetrics 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../userguide.html" >User Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" accesskey="U">Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction to Planform Objects</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="introduction-to-planform-objects">
<h1>Introduction to Planform Objects<a class="headerlink" href="#introduction-to-planform-objects" title="Permalink to this headline">¶</a></h1>
<p>Multiple definitions of the delta planform are supported.
These planform objects can be used as starting points for binary mask computation.
If not specified explicitly, they are often implicitly part of binary mask creation.</p>
<p>Below we demonstrate instantiation of both the <a class="reference internal" href="../../../_autosummary/deltametrics.plan.OpeningAnglePlanform.html#deltametrics.plan.OpeningAnglePlanform" title="deltametrics.plan.OpeningAnglePlanform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OpeningAnglePlanform</span></code></a> and the <a class="reference internal" href="../../../_autosummary/deltametrics.plan.MorphologicalPlanform.html#deltametrics.plan.MorphologicalPlanform" title="deltametrics.plan.MorphologicalPlanform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MorphologicalPlanform</span></code></a> objects.</p>
<p>For each we start with the same example dataset, and use the elevation data at the end of the simulation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">golfcube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">sample_data</span><span class="o">.</span><span class="n">golf</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Final Elevation Data&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/planforms/planform_intro-1.png">png</a>, <a class="reference external" href="../../../guides/examples/planforms/planform_intro-1.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/planform_intro-1.png" class="plot-directive" src="../../../_images/planform_intro-1.png" />
</figure>
<section id="the-openingangleplanform">
<h2>The OpeningAnglePlanform<a class="headerlink" href="#the-openingangleplanform" title="Permalink to this headline">¶</a></h2>
<p>This planform object is based around the Opening Angle Method <a class="footnote-reference brackets" href="#id3" id="id1">1</a>.</p>
<p>The <cite>OpeningAnglePlanform</cite> can be created directly from elevation data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">golfcube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">sample_data</span><span class="o">.</span><span class="n">golf</span><span class="p">()</span>
<span class="n">OAP</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">plan</span><span class="o">.</span><span class="n">OpeningAnglePlanform</span><span class="o">.</span><span class="n">from_elevation_data</span><span class="p">(</span>
  <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:],</span> <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>All planforms have a <cite>composite_array</cite> attribute from which a contour is extracted when defining the shoreline.
In the case of the <cite>OpeningAnglePlanform</cite>, the <cite>composite_array</cite> is the “sea angles” array from the Opening Angle Method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">OAP</span><span class="o">.</span><span class="n">composite_array</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/planforms/planform_intro-4.png">png</a>, <a class="reference external" href="../../../guides/examples/planforms/planform_intro-4.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/planform_intro-4.png" class="plot-directive" src="../../../_images/planform_intro-4.png" />
</figure>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Shaw, J. B., Wolinsky, M. A., Paola, C., &amp; Voller, V. R. (2008). An image‐based method for shoreline mapping on complex coasts. Geophysical Research Letters, 35(12).</p>
</dd>
</dl>
</section>
<section id="the-morphologicalplanform">
<h2>The MorphologicalPlanform<a class="headerlink" href="#the-morphologicalplanform" title="Permalink to this headline">¶</a></h2>
<p>This planform object uses mathematical morphology to identify the delta planform, inspired by Geleynse et al (2012) <a class="footnote-reference brackets" href="#id6" id="id4">2</a>.</p>
<p>The <cite>MorphologicalPlanform</cite> can also be created directly from elevation data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MP</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">plan</span><span class="o">.</span><span class="n">MorphologicalPlanform</span><span class="o">.</span><span class="n">from_elevation_data</span><span class="p">(</span>
  <span class="n">golfcube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:],</span> <span class="n">elevation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_disk</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the <cite>composite_array</cite> attribute of the planform represents the inverse of the average pixel value when different sized disks are used to perform the binary closing on the elevation data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">MP</span><span class="o">.</span><span class="n">composite_array</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/planforms/planform_intro-7.png">png</a>, <a class="reference external" href="../../../guides/examples/planforms/planform_intro-7.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/planform_intro-7.png" class="plot-directive" src="../../../_images/planform_intro-7.png" />
</figure>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p>Geleynse, N., Voller, V. R., Paola, C., &amp; Ganti, V. (2012). Characterization of river delta shorelines. Geophysical research letters, 39(17).</p>
</dd>
</dl>
</section>
<section id="mask-extraction">
<h2>Mask Extraction<a class="headerlink" href="#mask-extraction" title="Permalink to this headline">¶</a></h2>
<p>These planform objects can be used to extract shoreline masks as well as land masks.
The masking API accepts either planform object as an input, making it easy to swap one planform for the other in a masking workflow.</p>
<p>As an example, we will extract a shoreline from both planforms shown above.
Of course the two methods are different, so the shorelines identified will also be different.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SM_from_OAM</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">ShorelineMask</span><span class="o">.</span><span class="n">from_Planform</span><span class="p">(</span>
  <span class="n">OAP</span><span class="p">,</span> <span class="n">contour_threshold</span><span class="o">=</span><span class="mi">75</span><span class="p">)</span>

<span class="n">SM_from_MPM</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">ShorelineMask</span><span class="o">.</span><span class="n">from_Planform</span><span class="p">(</span>
  <span class="n">MP</span><span class="p">,</span> <span class="n">contour_threshold</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">SM_from_OAM</span><span class="o">.</span><span class="n">mask</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Shoreline from OAM&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">SM_from_MPM</span><span class="o">.</span><span class="n">mask</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Shoreline from MPM&#39;</span><span class="p">)</span>

<span class="n">d_plot</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
  <span class="n">SM_from_OAM</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">-</span> <span class="n">SM_from_MPM</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">),</span>
  <span class="n">interpolation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;bone&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;OAM shoreline - MPM shoreline&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">d_plot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">fraction</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/planforms/planform_intro-9.png">png</a>, <a class="reference external" href="../../../guides/examples/planforms/planform_intro-9.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/planform_intro-9.png" class="plot-directive" src="../../../_images/planform_intro-9.png" />
</figure>
<p>Both methods require the user to set a “contour threshold” value when extracting the shoreline.
The shoreline ends up being a contour extracted at this value from the planform <cite>composite_array</cite>.</p>
<p>The OAM method is relatively insensitive to the value of this threshold, whereas the MPM method can be more sensitive, depending on the range of disk sizes used.
Overall though, this example shows that the two methods produce roughly similar shorelines, and the syntax of the function calls to produce the planforms and the shoreline masks is more similar than it is different.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction to Planform Objects</a><ul>
<li><a class="reference internal" href="#the-openingangleplanform">The OpeningAnglePlanform</a></li>
<li><a class="reference internal" href="#the-morphologicalplanform">The MorphologicalPlanform</a></li>
<li><a class="reference internal" href="#mask-extraction">Mask Extraction</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../computations/comparing_speeds_of_stratigraphy_access.html"
                        title="previous chapter">Comparing speed of stratigraphy access</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../devguide.html"
                        title="next chapter">Developer Guide</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/guides/examples/planforms/planform_intro.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../devguide.html" title="Developer Guide"
             >next</a> |</li>
        <li class="right" >
          <a href="../computations/comparing_speeds_of_stratigraphy_access.html" title="Comparing speed of stratigraphy access"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DeltaMetrics 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../userguide.html" >User Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction to Planform Objects</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, The DeltaRCM Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>