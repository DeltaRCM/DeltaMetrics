
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to set up any dataset to work with DeltaMetrics &#8212; DeltaMetrics 0.4.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Compute ordinariness of preserved strata" href="../computations/preserved_velocities.html" />
    <link rel="prev" title="Quick connect to your own data" href="connect_to_nonstandard_data.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../computations/preserved_velocities.html" title="Compute ordinariness of preserved strata"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="connect_to_nonstandard_data.html" title="Quick connect to your own data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DeltaMetrics 0.4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to set up any dataset to work with DeltaMetrics</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-to-set-up-any-dataset-to-work-with-deltametrics">
<span id="setup-any-dataset"></span><h1>How to set up any dataset to work with DeltaMetrics<a class="headerlink" href="#how-to-set-up-any-dataset-to-work-with-deltametrics" title="Permalink to this heading">¶</a></h1>
<p>This guide describes how to set up any spatiotemporal (<cite>t-x-y</cite>) dataset to work with DeltaMetrics.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you are trying DeltaMetrics for the first time with your data, and want a quick and simple test, check out <a class="reference internal" href="connect_to_nonstandard_data.html"><span class="doc">this guide</span></a></p>
</div>
<p>First, let’s make some sample data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">netCDF4</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">deltametrics</span> <span class="k">as</span> <span class="nn">dm</span>

<span class="c1">## create the model data</span>
<span class="c1"># some spatial information</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># some temporal information</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># meshes for each to make fake data</span>
<span class="n">T</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s1">&#39;ij&#39;</span><span class="p">)</span>

<span class="c1"># make fake time by x by y data</span>
<span class="c1">#   hint: this would be the data from a model, experiment, or the field</span>
<span class="n">eta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span> <span class="n">X</span> <span class="o">+</span> <span class="n">Y</span><span class="p">)</span>
<span class="n">velocity</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span> <span class="n">Y</span> <span class="o">+</span> <span class="n">X</span><span class="p">)</span>
<span class="n">H_SL</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="c1"># sea level</span>
</pre></div>
</div>
<p>And we can see what this data looks like for a comparison with the data when we eventually have it in a <cite>DataCube</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># check out the data before we save it into a netcdf file</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;eta shape:&quot;</span><span class="p">,</span> <span class="n">eta</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">eta</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">velocity</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/io/setup_any_dataset-2.png">png</a>, <a class="reference external" href="../../../guides/examples/io/setup_any_dataset-2.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/setup_any_dataset-2.png" class="plot-directive" src="../../../_images/setup_any_dataset-2.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can name the spatial dimensions anything. Here, we have set the data up so that <cite>y</cite> is the first spatial dimension; this is opposite from <cite>pyDeltaRCM</cite> output data, where <cite>x</cite> is the downstream first spatial dimension.</p>
</div>
<section id="connecting-with-netcdf">
<h2>Connecting with NetCDF<a class="headerlink" href="#connecting-with-netcdf" title="Permalink to this heading">¶</a></h2>
<p>The standard I/O format for data used in DeltaMetrics is a NetCDF4 file, structured as sets of arrays.
NetCDF was designed with dimensional data in mind, so that we can use common dimensions to align and manipulate multiple different underlying variables.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Taking the time to set your data up correctly in a netCDF file is the preferred way to use DeltaMetrics with your own data.</p>
</div>
<p>This guide is not meant to be an exhaustive guide on the netCDF format, so we provide only a simple overview of some core components that affect DeltaMetrics.</p>
<ul class="simple">
<li><p><cite>dataset</cite>: the file, including all of the data and metadata to describe that data</p></li>
<li><p><cite>variable</cite>: a field in the <cite>dataset</cite> that contains numeric information</p></li>
<li><p><cite>dimension</cite>: a field in the <cite>dataset</cite> describing one dimension of the underlying data variables</p></li>
<li><p><cite>group</cite>: a mechanism for constructing a hierarchy of information within the <cite>dataset</cite>.</p></li>
</ul>
<section id="deltametrics-netcdf-data-standards">
<h3>DeltaMetrics NetCDF data standards<a class="headerlink" href="#deltametrics-netcdf-data-standards" title="Permalink to this heading">¶</a></h3>
<p>For DeltaMetrics to correctly work with underlying data, you must properly configure the dimensions and variables of the dataset.</p>
<ul class="simple">
<li><p>DeltaMetrics expects your core underlying spatiotemporal data (like 2D fields of elevation data, velocity, etc) to be organized into 3D arrays, with time along the first axis and two spatial dimensions along the next two axes.</p></li>
<li><p>DeltaMetrics expects <em>at least</em> three <cite>dimensions</cite> defined in the <cite>dataset</cite>, one of which must be named <code class="docutils literal notranslate"><span class="pre">time</span></code>, and the other two can have any name that describes the spatial dimensions of the data (e.g., <cite>x</cite>, <cite>lon</cite>, <cite>easting</cite>, etc.).</p></li>
<li><p>DeltaMetrics expects a <cite>variable</cite> with name <em>exactly matching</em> the name of each of the three previous <cite>dimensions</cite>.</p></li>
<li><p>DeltaMetrics expects some number of <cite>variables</cite> with arbitrary names that each contain a 3D array of spatiotemporal data of interest. I.e., this is the actual model/field/experiment data.</p></li>
<li><p>DeltaMetrics expects there to be a <cite>group</cite> with name <cite>meta</cite>, which contains any information relevant to the spatiotemporal data. E.g., sea level, coordinates of sediment feed location.</p></li>
</ul>
</section>
<section id="sample-code-for-creating-a-deltametrics-netcdf-file-with-python">
<h3>Sample code for creating a DeltaMetrics NetCDF file with Python<a class="headerlink" href="#sample-code-for-creating-a-deltametrics-netcdf-file-with-python" title="Permalink to this heading">¶</a></h3>
<p>Now, we write out the data to a netCDF file.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can use <cite>None</cite> as the length of the time dimension, if you want to create the NetCDF file while your model runs, and you do not know the size a priori.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output_folder</span> <span class="o">=</span> <span class="s1">&#39;./output&#39;</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="s1">&#39;model_output.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## create and fill the netcdf file</span>
<span class="n">output_netcdf</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span>
                        <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;NETCDF4&#39;</span><span class="p">)</span>

<span class="c1"># add some description information (see netCDF docs for more)</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Output from MyFakeModel&#39;</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;MyFakeModel v0.1&#39;</span>

<span class="c1"># create time and spatial netCDF dimensions</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">createDimension</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">createDimension</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">createDimension</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># create time and spatial netCDF variables</span>
<span class="n">v_time</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>
    <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,))</span>
<span class="n">v_time</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;second&#39;</span>
<span class="n">v_x</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>
    <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="n">v_x</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;meter&#39;</span>
<span class="n">v_y</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>
    <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="n">v_y</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;meter&#39;</span>

<span class="c1"># fill the variables with the coordinate information</span>
<span class="n">v_time</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">t</span>
<span class="n">v_x</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">v_y</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">y</span>

<span class="c1"># set up variables for output data grids</span>
<span class="n">v_eta</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>
    <span class="s1">&#39;eta&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="n">v_eta</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;meter&#39;</span>
<span class="n">v_velocity</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>
    <span class="s1">&#39;velocity&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="n">v_velocity</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;meter/second&#39;</span>
<span class="n">v_eta</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">eta</span>
<span class="n">v_velocity</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">velocity</span>

<span class="c1"># set up metadata group and populate variables</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">createGroup</span><span class="p">(</span><span class="s1">&#39;meta&#39;</span><span class="p">)</span>
<span class="n">v_L0</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span>  <span class="c1"># a scalar, the inlet length</span>
    <span class="s1">&#39;meta/L0&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">())</span>  <span class="c1"># no dims for scalar</span>
<span class="n">v_L0</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;cell&#39;</span>
<span class="n">v_L0</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">v_H_SL</span> <span class="o">=</span> <span class="n">output_netcdf</span><span class="o">.</span><span class="n">createVariable</span><span class="p">(</span> <span class="c1"># an array, the sea level</span>
    <span class="s1">&#39;meta/H_SL&#39;</span><span class="p">,</span> <span class="s1">&#39;f4&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,))</span>  <span class="c1"># only has time dimensions</span>
<span class="n">v_H_SL</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;meters&#39;</span>
<span class="n">v_H_SL</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">H_SL</span>

<span class="c1"># close the netcdf file</span>
<span class="n">output_netcdf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Now, let’s load the NetCDF file with DeltaMetrics. Make a cube by pointing to the directory and file location.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nc_datacube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">cube</span><span class="o">.</span><span class="n">DataCube</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="s1">&#39;model_output.nc&#39;</span><span class="p">))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="n">nc_datacube</span><span class="o">.</span><span class="n">quick_show</span><span class="p">(</span>
        <span class="s1">&#39;eta&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
        <span class="n">ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
    <span class="n">nc_datacube</span><span class="o">.</span><span class="n">quick_show</span><span class="p">(</span>
        <span class="s1">&#39;velocity&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
        <span class="n">ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/io/setup_any_dataset-5.png">png</a>, <a class="reference external" href="../../../guides/examples/io/setup_any_dataset-5.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/setup_any_dataset-5.png" class="plot-directive" src="../../../_images/setup_any_dataset-5.png" />
</figure>
<p>Note that the coordinates of the data (i.e., the <cite>x</cite> range in 0 to 6) have been correctly loaded from the NetCDF file and applied in the <cite>DataCube</cite>.</p>
<p>To show that the components of sea level and elevation have been connected:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dm</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">aerial_view</span><span class="p">(</span>
    <span class="n">nc_datacube</span><span class="p">[</span><span class="s1">&#39;eta&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:],</span>
    <span class="n">datum</span><span class="o">=</span><span class="n">nc_datacube</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;H_SL&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/io/setup_any_dataset-6.png">png</a>, <a class="reference external" href="../../../guides/examples/io/setup_any_dataset-6.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/setup_any_dataset-6.png" class="plot-directive" src="../../../_images/setup_any_dataset-6.png" />
</figure>
</section>
</section>
<section id="sample-code-for-working-with-data-loaded-in-memory">
<h2>Sample code for working with data loaded in memory<a class="headerlink" href="#sample-code-for-working-with-data-loaded-in-memory" title="Permalink to this heading">¶</a></h2>
<p>If you are not at all concerned with the size of your data, and loading all of this information into memory <em>in addition to whatever computational requirements you have for your analysis</em>, you can input data directly to the <cite>DataCube</cite> as a dictionary.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this example uses the sample data defined above.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create the dictionary</span>
<span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;eta&#39;</span><span class="p">:</span> <span class="n">eta</span><span class="p">,</span>
             <span class="s1">&#39;velocity&#39;</span><span class="p">:</span> <span class="n">velocity</span><span class="p">}</span>

<span class="c1"># make a cube from it</span>
<span class="n">dict_datacube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">cube</span><span class="o">.</span><span class="n">DataCube</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">})</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="n">dict_datacube</span><span class="o">.</span><span class="n">quick_show</span><span class="p">(</span>
        <span class="s1">&#39;eta&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
        <span class="n">ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
    <span class="n">dict_datacube</span><span class="o">.</span><span class="n">quick_show</span><span class="p">(</span>
        <span class="s1">&#39;velocity&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
        <span class="n">ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../../guides/examples/io/setup_any_dataset-7.png">png</a>, <a class="reference external" href="../../../guides/examples/io/setup_any_dataset-7.hires.png">hires.png</a>)</p>
<figure class="align-default">
<img alt="../../../_images/setup_any_dataset-7.png" class="plot-directive" src="../../../_images/setup_any_dataset-7.png" />
</figure>
<p>Notice that dimensions (range of <cite>x</cite> from 0 to 6) are properly handled, and variables are styled according to the DeltaMetrics default.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <cite>meta</cite> data model is not integrated into the dictionary input method.</p>
</div>
<p>You cannot use integrated metadata to a <cite>DataCube</cite> created from a dictionary; you will need to manage and integrate this metadata manually as needed.
We do not anticipate this will affect many users, but if you need the ability to add metadata to the <cite>DataCube</cite> from dictionary input, please open an issue request or submit a pull request.</p>
<p>If you want a basic workaround, you can create a dictionary inside the input dictionary, named <cite>meta</cite>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dict_datacube</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">cube</span><span class="o">.</span><span class="n">DataCube</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">t</span><span class="p">,</span>
                <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
                <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
                <span class="s1">&#39;meta&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;H_SL&#39;</span><span class="p">:</span> <span class="n">H_SL</span><span class="p">}})</span>
</pre></div>
</div>
<p>But be aware that dimensions will not be attached to the metadata (unless you pass in a <cite>DataArray</cite>), and you cannot use the <cite>.meta</cite> accessor, and instead would need to use <code class="docutils literal notranslate"><span class="pre">dict_datacube['meta']['H_SL']</span></code>.</p>
</section>
<section id="conventions-for-data-and-information">
<h2>Conventions for data and information<a class="headerlink" href="#conventions-for-data-and-information" title="Permalink to this heading">¶</a></h2>
<p>While not strictly necessary, it may be helpful to adhere to a naming convention that DeltaMetrics uses internally to define some common attributes of sedimentary systems.</p>
<section id="spatiotemporal-variable-conventions">
<h3>Spatiotemporal variable conventions<a class="headerlink" href="#spatiotemporal-variable-conventions" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><cite>eta</cite>: name any bed elevation variable <cite>eta</cite>. You can still use DeltaMetrics with a field with any other name to represent bed elevation (e.g., <cite>z</cite>), but the default expected name is <cite>eta</cite>, and using <cite>z</cite> may result in confusion—especially if working with stratigraphy.</p></li>
<li><p>Organize model data so that an inlet of sediment and water (if present) is located along the the <cite>dim1==0</cite> domain edge. This is not strictly necessary, but some DeltaMetrics default values will work best this way.</p></li>
</ul>
</section>
<section id="metadata-variable-naming-conventions">
<h3>Metadata variable naming conventions<a class="headerlink" href="#metadata-variable-naming-conventions" title="Permalink to this heading">¶</a></h3>
<p>If any of the following information is available or relevant for your model, experiment, or field site, we recommend adding this information to the <cite>meta</cite> group in an input NetCDF file.</p>
<ul class="simple">
<li><p><cite>H_SL</cite>: name any basin-wide water level as <cite>H_SL</cite> in the metadata, and define it in the same coordinate system as <cite>eta</cite> (e.g., use meters and the same elevation datum).</p></li>
<li><p><cite>L0</cite>: the <cite>dim1</cite> inlet length, number of indices from the starting edge of <cite>dim1</cite>. Do not include this field if inlet not located along <cite>dim1==0</cite> edge.</p></li>
<li><p><cite>CTR</cite>: the <cite>dim2</cite> inlet center, number of indices from the starting edge of <cite>dim2</cite>. Do not include this field if inlet not located along <cite>dim1==0</cite> edge.</p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>None of these variables need to be defined; you can always manually pass them to DeltaMetrics constructors, but following the convention when creating your data file will save you many keystrokes later.</p>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">How to set up any dataset to work with DeltaMetrics</a><ul>
<li><a class="reference internal" href="#connecting-with-netcdf">Connecting with NetCDF</a><ul>
<li><a class="reference internal" href="#deltametrics-netcdf-data-standards">DeltaMetrics NetCDF data standards</a></li>
<li><a class="reference internal" href="#sample-code-for-creating-a-deltametrics-netcdf-file-with-python">Sample code for creating a DeltaMetrics NetCDF file with Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sample-code-for-working-with-data-loaded-in-memory">Sample code for working with data loaded in memory</a></li>
<li><a class="reference internal" href="#conventions-for-data-and-information">Conventions for data and information</a><ul>
<li><a class="reference internal" href="#spatiotemporal-variable-conventions">Spatiotemporal variable conventions</a></li>
<li><a class="reference internal" href="#metadata-variable-naming-conventions">Metadata variable naming conventions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="connect_to_nonstandard_data.html"
                          title="previous chapter">Quick connect to your own  data</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../computations/preserved_velocities.html"
                          title="next chapter">Compute ordinariness of preserved strata</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/guides/examples/io/setup_any_dataset.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../computations/preserved_velocities.html" title="Compute ordinariness of preserved strata"
             >next</a> |</li>
        <li class="right" >
          <a href="connect_to_nonstandard_data.html" title="Quick connect to your own data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DeltaMetrics 0.4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Examples</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to set up any dataset to work with DeltaMetrics</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, The DeltaRCM Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>